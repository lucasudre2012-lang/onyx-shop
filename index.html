<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jeux à la demande – 10 $ / jeu</title>
  <meta name="description" content="Je crée un mini‑jeu sur mesure pour vous, au tarif unique de 10 $ par jeu. Commandez via le formulaire et recevez votre jeu !" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <script defer src="https://unpkg.com/@alpinejs/morph@3.x.x/dist/cdn.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { --accent: #6d28d9; }
    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,0.6); }
    .badge { font-size: 0.75rem; padding: .25rem .5rem; border-radius: 999px; background: #f1f5f9; border: 1px solid #e2e8f0; color: #334155; }
    .kbd { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: .85em; padding: .15rem .4rem; border: 1px solid #cbd5e1; border-bottom-width: 2px; border-radius: .4rem; background: #f8fafc; }
  </style>

  <!-- Application config (éditer ici) -->
  <script>
    // ❗️Renseignez ces valeurs AVANT publication
    window.APP_CONFIG = {
      FORM_ENDPOINT: "",                 // ex: "https://formspree.io/f/xxxxxxx"
      PAYPAL_ME: "https://paypal.me/VOTRE_PSEUDO/10", // lien de paiement public (facultatif)
      CONTACT_EMAIL: "luca.sudre@outlook.fr", // utilisé par le bouton mailto de secours
      TEST_MODE: false                   // passez à true pour tester sans endpoint
    };
  </script>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-100 text-slate-800">
  <!-- Header -->
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#" class="font-extrabold text-xl tracking-tight"><span class="text-slate-900">Jeux à la demande</span> <span class="text-[var(--accent)]">10 $</span></a>
      <nav class="hidden sm:flex gap-6 text-sm">
        <a href="#comment-ca-marche" class="hover:text-[var(--accent)]">Comment ça marche</a>
        <a href="#tarif" class="hover:text-[var(--accent)]">Tarif</a>
        <a href="#commande" class="hover:text-[var(--accent)]">Commander</a>
        <a href="#faq" class="hover:text-[var(--accent)]">FAQ</a>
      </nav>
      <a href="#commande" class="inline-flex items-center gap-2 px-4 py-2 rounded-2xl bg-[var(--accent)] text-white text-sm font-semibold shadow hover:opacity-90">Commander</a>
    </div>
  </header>

  <!-- Hero -->
  <section class="relative overflow-hidden">
    <div class="absolute -top-24 -right-24 w-[28rem] h-[28rem] bg-[var(--accent)]/10 rounded-full blur-3xl" aria-hidden="true"></div>
    <div class="max-w-6xl mx-auto px-4 py-16 lg:py-24 grid lg:grid-cols-2 gap-10 items-center">
      <div>
        <h1 class="text-4xl lg:text-6xl font-extrabold leading-tight text-slate-900">
          Je crée votre <span class="text-[var(--accent)]">mini‑jeu</span> sur mesure
        </h1>
        <p class="mt-4 text-lg text-slate-600">Donnez votre idée (thème, règles, plateformes web/PC) et je le code pour vous. Livraison rapide, code fourni, droits d'utilisation personnels.</p>
        <ul class="mt-6 space-y-2 text-slate-700">
          <li class="flex items-start gap-3"><span class="mt-1 h-2 w-2 rounded-full bg-[var(--accent)]"></span><span>Tarif unique : <strong>10 $ / jeu</strong></span></li>
          <li class="flex items-start gap-3"><span class="mt-1 h-2 w-2 rounded-full bg-[var(--accent)]"></span><span>Hébergement possible sur <strong>GitHub Pages</strong></span></li>
          <li class="flex items-start gap-3"><span class="mt-1 h-2 w-2 rounded-full bg-[var(--accent)]"></span><span>Modifs mineures incluses (1 aller‑retour)</span></li>
        </ul>
        <div class="mt-8 flex flex-wrap gap-3">
          <a href="#commande" class="px-5 py-3 rounded-2xl bg-[var(--accent)] text-white font-semibold shadow hover:opacity-90">Commander maintenant</a>
          <a href="#exemples" class="px-5 py-3 rounded-2xl border border-slate-300 hover:border-[var(--accent)]">Voir des exemples</a>
        </div>
      </div>
      <div class="relative">
        <div class="glass rounded-3xl shadow-lg p-6 border border-white/40">
          <div class="grid grid-cols-3 gap-3">
            <div class="aspect-video bg-slate-200 rounded-xl"></div>
            <div class="aspect-video bg-slate-200 rounded-xl"></div>
            <div class="aspect-video bg-slate-200 rounded-xl"></div>
            <div class="aspect-video bg-slate-200 rounded-xl"></div>
            <div class="aspect-video bg-slate-200 rounded-xl"></div>
            <div class="aspect-video bg-slate-200 rounded-xl"></div>
          </div>
          <p class="text-xs text-slate-500 mt-3">Aperçus de mini‑jeux (placeholders). Remplacez ces blocs par des images de vos projets.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Comment ça marche -->
  <section id="comment-ca-marche" class="py-16 bg-white border-t border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-3xl font-extrabold">Comment ça marche</h2>
      <div class="mt-8 grid md:grid-cols-3 gap-6">
        <div class="p-6 rounded-2xl bg-slate-50 border border-slate-200">
          <h3 class="font-bold">1) Décrivez votre jeu</h3>
          <p class="text-slate-600 mt-2">Thème, règles, plateforme (web/PC), vues, assets, sons… plus c’est détaillé, mieux c’est.</p>
        </div>
        <div class="p-6 rounded-2xl bg-slate-50 border border-slate-200">
          <h3 class="font-bold">2) Je développe</h3>
          <p class="text-slate-600 mt-2">Je code un prototype jouable et vous l’héberge (option GitHub Pages) pour que vous testiez.</p>
        </div>
        <div class="p-6 rounded-2xl bg-slate-50 border border-slate-200">
          <h3 class="font-bold">3) Livraison</h3>
          <p class="text-slate-600 mt-2">Vous recevez le jeu final + les sources. Une petite retouche incluse si besoin.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Tarif -->
  <section id="tarif" class="py-16">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-3xl font-extrabold">Tarif simple et clair</h2>
      <div class="mt-8 grid md:grid-cols-3 gap-6">
        <div class="p-6 rounded-3xl border-2 border-[var(--accent)] bg-white shadow">
          <div class="text-sm text-slate-500">Mini‑jeu sur mesure</div>
          <div class="mt-2 text-5xl font-extrabold tracking-tight">10 $</div>
          <ul class="mt-4 text-sm text-slate-700 space-y-2">
            <li>Prototype + version finale</li>
            <li>1 aller‑retour de retouches</li>
            <li>Livraison du code source</li>
            <li>Hébergement GitHub Pages (option)</li>
          </ul>
          <a href="#commande" class="mt-6 inline-block px-5 py-3 rounded-2xl bg-[var(--accent)] text-white font-semibold shadow hover:opacity-90">Commander</a>
        </div>
        <div class="p-6 rounded-3xl border border-slate-200 bg-white">
          <div class="text-sm text-slate-500">Options (sur devis)</div>
          <ul class="mt-4 text-sm text-slate-700 space-y-2">
            <li>Graphismes/sons personnalisés</li>
            <li>Score en ligne / sauvegardes</li>
            <li>Version mobile optimisée</li>
            <li>Fonctions multi‑joueurs</li>
          </ul>
        </div>
        <div class="p-6 rounded-3xl border border-slate-200 bg-white">
          <div class="text-sm text-slate-500">Paiement</div>
          <p class="mt-2 text-sm text-slate-700">Le site n’encaisse pas directement. Après validation de votre demande, vous recevrez un lien de paiement sécurisé.</p>
          <a href="" id="payBtnTop" target="_blank" rel="noopener" class="mt-4 inline-flex items-center gap-2 px-5 py-3 rounded-2xl bg-[var(--accent)] text-white font-semibold shadow hover:opacity-90">Payer 10 $ via PayPal</a>
          <p class="mt-2 text-xs text-slate-500">Astuce : si vous êtes mineur, le paiement est effectué par un parent/tuteur.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Commande -->
  <section id="commande" class="py-16 bg-white border-y border-slate-200">
    <div class="max-w-3xl mx-auto px-4">
      <h2 class="text-3xl font-extrabold">Commander votre jeu</h2>
      <p class="mt-2 text-slate-600">Remplissez ce formulaire. Je reviens vers vous par email avec les étapes et le paiement.</p>

      <!-- Alerte de configuration -->
      <div id="configAlert" class="hidden mt-6 p-4 rounded-xl border text-sm"></div>

      <!-- Formulaire -->
      <form id="orderForm" class="mt-8 grid gap-4" x-data="orderForm()" @submit.prevent="submit">
        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <label class="text-sm font-semibold">Votre prénom</label>
            <input data-testid="firstName" x-model="firstName" required type="text" class="mt-1 w-full px-4 py-3 rounded-2xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[var(--accent)]" placeholder="ex : Luca" />
          </div>
          <div>
            <label class="text-sm font-semibold">Votre email</label>
            <input data-testid="email" x-model="email" required type="email" class="mt-1 w-full px-4 py-3 rounded-2xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[var(--accent)]" placeholder="ex : luca@email.com" />
          </div>
        </div>
        <div>
          <label class="text-sm font-semibold">Plateforme</label>
          <select data-testid="platform" x-model="platform" required class="mt-1 w-full px-4 py-3 rounded-2xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[var(--accent)]">
            <option value="">— Choisir —</option>
            <option>Web (navigateur)</option>
            <option>PC (Windows)</option>
          </select>
        </div>
        <div>
          <label class="text-sm font-semibold">Idée de jeu</label>
          <textarea data-testid="idea" x-model="idea" required rows="6" class="mt-1 w-full px-4 py-3 rounded-2xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[var(--accent)]" placeholder="Expliquez le gameplay, les règles, les assets souhaités, exemples…"></textarea>
        </div>
        <div>
          <label class="text-sm font-semibold">Budget</label>
          <input value="10 $ (tarif fixe)" disabled class="mt-1 w-full px-4 py-3 rounded-2xl border border-slate-300 bg-slate-50" />
        </div>
        <div class="flex items-center gap-3">
          <input type="checkbox" id="consent" x-model="consent" class="h-4 w-4 rounded border-slate-300" required />
          <label for="consent" class="text-sm text-slate-600">J’accepte d’être contacté par email à propos de ma commande.</label>
        </div>
        <div class="flex gap-3">
          <button data-testid="submit" type="submit" class="px-5 py-3 rounded-2xl bg-[var(--accent)] text-white font-semibold hover:opacity-90">Envoyer la demande</button>
          <a href="#" @click.prevent="mailto()" class="px-5 py-3 rounded-2xl border border-slate-300 hover:border-[var(--accent)]">Envoyer par email</a>
        </div>

        <!-- Messages -->
        <p data-testid="msg-ok" x-show="state==='ok'" x-transition class="text-green-700 bg-green-50 border border-green-200 rounded-xl p-3">Merci ! Votre demande a été envoyée. Je vous réponds par email.</p>
        <p data-testid="msg-err" x-show="state==='err'" x-transition class="text-red-700 bg-red-50 border border-red-200 rounded-xl p-3">Oups ! Impossible d’envoyer. Utilisez le bouton “Envoyer par email”.</p>

        <div class="pt-4">
          <a id="payBtnBottom" href="" target="_blank" rel="noopener" class="inline-flex items-center gap-2 px-5 py-3 rounded-2xl bg-[var(--accent)] text-white font-semibold shadow hover:opacity-90">Payer 10 $ via PayPal</a>
          <p class="mt-2 text-xs text-slate-500">Le paiement est traité sur PayPal (compte de parent/tuteur si mineur).</p>
        </div>
      </form>

      <script>
        // Helpers
        const cfg = () => ({...window.APP_CONFIG});
        const isConfigured = () => typeof cfg().FORM_ENDPOINT === 'string' && /^(https?:)\/\//i.test(cfg().FORM_ENDPOINT);
        const usingPayPal = () => typeof cfg().PAYPAL_ME === 'string' && cfg().PAYPAL_ME.trim().length > 0;

        // UI: avertir si non configuré pour éviter "Script error"
        (function showConfigWarning(){
          const box = document.getElementById('configAlert');
          if(!box) return;
          if(!isConfigured()){
            box.classList.remove('hidden');
            box.classList.add('border-amber-200','bg-amber-50','text-amber-800');
            box.innerHTML = `
              <strong>Configuration requise :</strong> Aucun <span class="badge">FORM_ENDPOINT</span> n'est défini.
              Le formulaire fonctionnera en <em>mode démo</em> si <span class="badge">TEST_MODE</span> est activé, sinon utilisez le bouton <span class="badge">Envoyer par email</span>.
              <br>Éditez la variable <span class="kbd">APP_CONFIG.FORM_ENDPOINT</span> dans le code.
            `;
          }
        })();

        // Renseigner les liens PayPal dynamiquement
        (function wirePayPal(){
          const link = usingPayPal() ? cfg().PAYPAL_ME : '';
          const top = document.getElementById('payBtnTop');
          const bottom = document.getElementById('payBtnBottom');
          if(top) top.href = link || '#';
          if(bottom) bottom.href = link || '#';
          if(!usingPayPal()){
            if(top) top.classList.add('opacity-60','pointer-events-none');
            if(bottom) bottom.classList.add('opacity-60','pointer-events-none');
          }
        })();

        function orderForm(override={}){
          const conf = Object.assign({}, cfg(), override);
          return {
            firstName: "",
            email: "",
            platform: "",
            idea: "",
            consent: false,
            state: "idle",
            submit(){
              // Empêcher double soumission
              if(this.state === 'loading') return;
              // Si pas d'endpoint et pas de TEST_MODE -> pas d'appel réseau
              if(!isConfigured() && !conf.TEST_MODE){ this.state = 'err'; return; }

              this.state = 'loading';
              const payload = { firstName: this.firstName, email: this.email, platform: this.platform, idea: this.idea, consent: this.consent, ts: new Date().toISOString() };

              // TEST MODE: simule un succès et log en localStorage
              if(conf.TEST_MODE){
                try{
                  const key = 'orders_demo_storage';
                  const arr = JSON.parse(localStorage.getItem(key) || '[]');
                  arr.push(payload);
                  localStorage.setItem(key, JSON.stringify(arr));
                }catch(e){ /* stockage non bloquant */ }
                this.state = 'ok';
                this.reset();
                return;
              }

              // Envoi réel
              fetch(conf.FORM_ENDPOINT, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) })
                .then(r => { if(!r.ok) throw new Error('Network'); return r.json().catch(()=>({})); })
                .then(() => { this.state = 'ok'; this.reset(); })
                .catch(() => { this.state = 'err'; })
                .finally(()=>{ if(this.state === 'loading') this.state = 'idle'; });
            },
            mailto(){
              const email = conf.CONTACT_EMAIL && conf.CONTACT_EMAIL.includes('@') ? conf.CONTACT_EMAIL : '';
              const subject = encodeURIComponent('Commande de mini‑jeu (10 $)');
              const body = encodeURIComponent(`Prénom: ${this.firstName}
Email: ${this.email}
Plateforme: ${this.platform}
Idée de jeu:
${this.idea}`);
              if(!email){
                alert('Adresse email de contact non configurée (APP_CONFIG.CONTACT_EMAIL).');
                return;
              }
              window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
            },
            reset(){ this.firstName=''; this.email=''; this.platform=''; this.idea=''; this.consent=false; }
          }
        }

        /**
         * ✅ Tests unitaires légers (opt‑in)
         * Lancez avec l'URL : ?runTests=1
         */
        (function testHarness(){
          const params = new URLSearchParams(location.search);
          if(!params.get('runTests')) return;
          const results = [];
          const assert = (name, cond) => results.push({name, ok: !!cond});
          const sample = {firstName:'Test', email:'a@b.c', platform:'Web (navigateur)', idea:'Un jeu test', consent:true};

          // Test 1: endpoint absent, TEST_MODE=false => state 'err' (pas d'exception)
          try{
            const o1 = orderForm({ FORM_ENDPOINT: '', TEST_MODE: false });
            Object.assign(o1, sample);
            o1.submit();
            assert('T1: sans endpoint → err', o1.state === 'err' || o1.state === 'idle');
          }catch(e){ assert('T1: aucune exception', false); }

          // Test 2: endpoint absent, TEST_MODE=true => succès et stockage local
          try{
            const key = 'orders_demo_storage';
            localStorage.removeItem(key);
            const o2 = orderForm({ FORM_ENDPOINT: '', TEST_MODE: true });
            Object.assign(o2, sample);
            o2.submit();
            const arr = JSON.parse(localStorage.getItem(key) || '[]');
            assert('T2: TEST_MODE → ok', arr.length >= 1);
          }catch(e){ assert('T2: aucune exception', false); }

          // Test 3: endpoint fictif avec fetch simulé (succès)
          try{
            const realFetch = window.fetch;
            window.fetch = () => Promise.resolve({ ok:true, json:()=>Promise.resolve({ok:true})});
            const o3 = orderForm({ FORM_ENDPOINT: 'https://unit.test/ok', TEST_MODE: false });
            Object.assign(o3, sample);
            o3.submit();
            setTimeout(()=>{
              assert('T3: fetch simulé → ok', o3.state === 'ok' || o3.state === 'idle');
              window.fetch = realFetch;
              renderTestReport(results);
            }, 10);
            return; // report asynch dans setTimeout
          }catch(e){ assert('T3: aucune exception', false); }

          renderTestReport(results);

          function renderTestReport(list){
            const okCount = list.filter(x=>x.ok).length;
            const total = list.length;
            const wrap = document.createElement('div');
            wrap.className = 'fixed bottom-4 right-4 max-w-md bg-white border border-slate-200 shadow-xl rounded-2xl p-4 text-sm z-50';
            wrap.innerHTML = `<div class="font-bold mb-2">Tests: ${okCount}/${total} OK</div>` +
              '<ul class="space-y-1">' + list.map(x=>`<li>${x.ok ? '✅' : '❌'} ${x.name}</li>`).join('') + '</ul>' +
              '<div class="mt-3 text-xs text-slate-500">Astuce : ajoutez <span class="kbd">?runTests=1</span> à l’URL pour relancer.</div>';
            document.body.appendChild(wrap);
          }
        })();
      </script>
    </div>
  </section>

  <!-- Exemples -->
  <section id="exemples" class="py-16">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-3xl font-extrabold">Exemples de jeux</h2>
      <p class="mt-2 text-slate-600">Ajoutez ici des liens vers vos projets (GitHub Pages, itch.io, vidéos…).</p>
      <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <a class="block p-4 rounded-2xl border border-slate-200 hover:border-[var(--accent)] bg-white" href="#" target="_blank" rel="noopener">Projet 1 (remplacez)</a>
        <a class="block p-4 rounded-2xl border border-slate-200 hover:border-[var(--accent)] bg-white" href="#" target="_blank" rel="noopener">Projet 2 (remplacez)</a>
        <a class="block p-4 rounded-2xl border border-slate-200 hover:border-[var(--accent)] bg-white" href="#" target="_blank" rel="noopener">Projet 3 (remplacez)</a>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="py-16 bg-white border-t border-slate-200">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-3xl font-extrabold">FAQ</h2>
      <div class="mt-8 grid md:grid-cols-2 gap-6">
        <div class="p-6 rounded-2xl border border-slate-200">
          <h3 class="font-bold">Quels langages utilisez‑vous ?</h3>
          <p class="mt-2 text-slate-600">Selon le besoin : HTML/CSS/JS (web), Python/Pygame (PC), ou autres stacks simples.</p>
        </div>
        <div class="p-6 rounded-2xl border border-slate-200">
          <h3 class="font-bold">Combien de temps pour livrer ?</h3>
          <p class="mt-2 text-slate-600">En général quelques jours pour un mini‑jeu. Je vous tiens informé par email.</p>
        </div>
        <div class="p-6 rounded-2xl border border-slate-200">
          <h3 class="font-bold">Puis‑je demander des modifications ?</h3>
          <p class="mt-2 text-slate-600">Oui : une petite série de retouches (1 aller‑retour) est incluse dans le prix.</p>
        </div>
        <div class="p-6 rounded-2xl border border-slate-200">
          <h3 class="font-bold">Comment payer ?</h3>
          <p class="mt-2 text-slate-600">Après validation de la demande, je vous envoie un lien Stripe/PayPal. Aucun paiement n’est collecté sur ce site.</p>
        </div>
      </div>
      <p class="mt-6 text-xs text-slate-500">Mentions : Ce site est une vitrine. Le contenu est informatif. Les marques citées appartiennent à leurs propriétaires.</p>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-10">
    <div class="max-w-6xl mx-auto px-4 text-sm text-slate-500 flex flex-col md:flex-row gap-4 md:gap-8 justify-between">
      <div>&copy; <span id="year"></span> Jeux à la demande. Tous droits réservés.</div>
      <div class="flex gap-4">
        <a href="#commande" class="hover:text-[var(--accent)]">Commander</a>
        <a href="#" class="hover:text-[var(--accent)]">Conditions</a>
        <a href="#" class="hover:text-[var(--accent)]">Contact</a>
      </div>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <!-- SEO JSON-LD (modifiable) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "Jeux à la demande",
    "description": "Création de mini-jeux personnalisés au tarif unique de 10 $ / jeu.",
    "priceRange": "$$",
    "url": "https://VOTRE_NOM.github.io/REPO",
    "areaServed": "Monde",
    "offers": {
      "@type": "Offer",
      "price": "10",
      "priceCurrency": "USD"
    }
  }
  </script>
</body>
</html>
